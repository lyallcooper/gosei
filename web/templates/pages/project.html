{{define "pages/project.html"}}
<div class="project-page" data-project-id="{{.Project.ID}}">
    <div class="page-header">
        <div class="page-breadcrumb">
            <a href="/" class="breadcrumb-link">Projects</a>
            <span class="breadcrumb-sep">/</span>
            <span class="breadcrumb-current">{{.Project.Name}}</span>
        </div>
        <h1 class="page-title">{{.Project.Name}}</h1>
        <div class="page-meta">
            <span class="status-badge {{statusClass .Project.Status}}">
                {{statusIcon .Project.Status}} {{.Project.Status}}
            </span>
            <span class="meta-item project-services">{{.Project.Running}}/{{.Project.Total}} services</span>
            <span class="meta-item path">{{.Project.Path}}</span>
        </div>
    </div>

    <div class="project-actions">
        <button
            class="btn btn-primary"
            hx-post="/api/projects/{{.Project.ID}}/up"
            hx-swap="none"
        >
            UP
        </button>
        <button
            class="btn btn-danger"
            hx-post="/api/projects/{{.Project.ID}}/down"
            hx-swap="none"
        >
            DOWN
        </button>
        <button
            class="btn"
            hx-post="/api/projects/{{.Project.ID}}/restart"
            hx-swap="none"
        >
            RESTART
        </button>
        <button
            class="btn"
            hx-post="/api/projects/{{.Project.ID}}/pull"
            hx-swap="none"
        >
            PULL
        </button>
    </div>

    {{template "partials/containers-section.html" .}}

    <div class="services-section">
        <h2 class="section-title">Services (from compose file)</h2>
        <div class="services-grid">
            {{range .Project.Services}}
            <div class="service-card">
                <div class="service-header">
                    <h3 class="service-name">{{.Name}}</h3>
                </div>
                <div class="service-details">
                    {{if .Image}}
                    <div class="service-detail">
                        <span class="detail-label">Image:</span>
                        <span class="detail-value">{{.Image}}</span>
                    </div>
                    {{end}}
                    {{if .Build}}
                    <div class="service-detail">
                        <span class="detail-label">Build:</span>
                        <span class="detail-value">{{.Build.Context}}</span>
                    </div>
                    {{end}}
                    {{if .Ports}}
                    <div class="service-detail">
                        <span class="detail-label">Ports:</span>
                        <span class="detail-value">{{range $i, $p := .Ports}}{{if $i}}, {{end}}{{$p}}{{end}}</span>
                    </div>
                    {{end}}
                    {{if .DependsOn}}
                    <div class="service-detail">
                        <span class="detail-label">Depends on:</span>
                        <span class="detail-value">{{range $i, $d := .DependsOn}}{{if $i}}, {{end}}{{$d}}{{end}}</span>
                    </div>
                    {{end}}
                </div>
            </div>
            {{end}}
        </div>
    </div>
</div>
{{end}}
